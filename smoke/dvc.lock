schema: '2.0'
stages:
  generate_data:
    cmd: python3.10 ../prec_data/data_generation.py --config data_params.yaml
    deps:
    - path: ../prec_data/data.py
      md5: 7e1ffcaeb9bfa6a723331960a3a9e1b1
      size: 13353
    - path: ../prec_data/data_generation.py
      md5: 0736bc24783c4a8aca0ce6aa46d4d5fa
      size: 4147
    - path: data_params.yaml
      md5: 640b3368012429056caf77c7ba9022fd
      size: 87
    params:
      data_params.yaml:
        model.dimension: 20
        model.nsamples: 10000
        model.output: /root/raw_data/data.pkl
        model.window: 10
    outs:
    - path: /root/raw_data/data.pkl
      md5: f955f779dd1d2a6f5fadaee43eb28127
      size: 340245130
  smoke_train:
    cmd: source ../.set_environment_variables.sh && python3.10 training.py --config
      config_smoke.yaml --exp-name smoke_train_tr
    deps:
    - path: /root/raw_data/data.pkl
      md5: e51de21bb3af09af8e6b176cccc5400c
      size: 340245130
    - path: config_smoke.yaml
      md5: 9c9223178aba5ed5d5dbefadc65242f7
      size: 176
    - path: training.py
      md5: 2097ef605bb16fe30672ec99e1f5a279
      size: 2698
    outs:
    - path: metrics.yaml
      md5: 4f6c619706948b359c6ee13581011309
      size: 156
  smoke_hpo:
    cmd: python3 hpo_smoke.py
    deps:
    - path: raw_data/data.pkl
      md5: a600b8d7e828a5587f9718ebc8f02049
      size: 169322620
  train:
    cmd: source ../.set_environment_variables.sh && python3.10 training.py --config
      config_smoke.yaml --exp-name smoke_train_tr
    deps:
    - path: ../prec_data/data.py
      md5: 30b58de90114f083478c1430cfc979d4
      size: 13355
    - path: /root/raw_data/data.pkl
      md5: f955f779dd1d2a6f5fadaee43eb28127
      size: 340245130
    - path: config_smoke.yaml
      md5: 31c528fe126f9a2ef166aec4767b58b8
      size: 176
    - path: training.py
      md5: 17f20cae0887852d316376abd0f0eac0
      size: 3150
    outs:
    - path: metrics.yaml
      md5: ad1cb7b3c469f8f03615008cb3bb00b0
      size: 191
    - path: mlflow_run_id.yaml
      md5: 4c5f5203364db2ede4fa6710d3ed58bb
      size: 41
  inference:
    cmd: source ../.set_environment_variables.sh && python3.10 inference.py --run-id
      df94d4a31c3b48e883fe0b9673030685
    deps:
    - path: mlflow_run_id.yaml
      md5: 4c5f5203364db2ede4fa6710d3ed58bb
      size: 41
    outs:
    - path: ../figures/condition_numbers_df94d4a31c3b48e883fe0b9673030685.png
      md5: 9314a36860b9b70381792a7c146d5a22
      size: 32441
    - path: ../figures/inference_approx_df94d4a31c3b48e883fe0b9673030685.png
      md5: 376ff3f90935c341a55dfb9709835a2e
      size: 60184
    - path: ../figures/inference_precondition_df94d4a31c3b48e883fe0b9673030685.png
      md5: 8622303946c21cf103c78e23fdf43f85
      size: 45989
