schema: '2.0'
stages:
  train:
    cmd: . /home/GNlearning/.set_environment_variables.sh && python3.10 /home/GNlearning/SW/training.py
      --config config.yaml --exp-name SW_GN_learning
    deps:
    - path: config.yaml
      hash: md5
      md5: b7ae27e9013162077bff974a2bc9db1a
      size: 502
    - path: training.py
      hash: md5
      md5: 16ce45544254fb984923eb76c738e765
      size: 7250
    params:
      config.yaml:
        architecture.batch_size: 2
        architecture.class: SW_TransUNet
        architecture.n_layers: 0
        architecture.rank: 2000
        data.data_folder: /home/data/data_data_assimilation/shallow_water/new_config
        model.dimension: 12160
        optimizer.epochs: 50
    outs:
    - path: artifacts/metrics.yaml
      hash: md5
      md5: b063ff2bc9329efd88960675ce09def6
      size: 374
    - path: artifacts/mlflow_run_id.yaml
      hash: md5
      md5: 6eb451ea1ab31b941b7acf81b2982be9
      size: 250
    - path: artifacts/training_logs.csv
      hash: md5
      md5: df5576aae83220cad76927af5c462043
      size: 43892
  data_generation:
    cmd: . /home/GNlearning/.set_environment_variables.sh && python3.10 /home/shallow/data_generation.py
      --linearization /home/shallow/data/current_state.nc --config config.yaml
